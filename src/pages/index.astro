---
// Chiltern Computers - Main Page
export const prerender = true;

const pageTitle = "Chiltern Computers - Computer Supply, Repair & Upgrade Services";
const pageDescription = "Professional computer repair, custom PC builds, and IT services in Romford and surrounding areas. Free collection & drop-off, 9am-9pm daily.";

import Navbar from '../components/Navbar.astro';
import Hero from '../components/Hero.astro';
import Services from '../components/Services.astro';
import CustomPCs from '../components/CustomPCs.astro';
import GamingRig from '../components/GamingRig.astro';
import CCASM from '../components/CCASM.astro';
import ServiceAreas from '../components/ServiceAreas.astro';
import Contact from '../components/Contact.astro';
import Footer from '../components/Footer.astro';
import Layout from '../layouts/Layout.astro';
---
<Layout>
    <head slot="head">
        <meta charset="utf-8" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content={pageDescription} />
        <title>{pageTitle}</title>
        
        <!-- SEO Meta Tags -->
        <meta name="keywords" content="computer repair, PC repair, laptop repair, custom PC build, IT services, Romford, Essex" />
        <meta name="author" content="Chiltern Computers" />
        <meta property="og:title" content={pageTitle} />
        <meta property="og:description" content={pageDescription} />
        <meta property="og:type" content="website" />
        
        <!-- Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    </head>
    <Navbar />
    <Hero />
    <Services />
    <CustomPCs />
    <GamingRig />
    <CCASM />
    <ServiceAreas />
    <Contact />
    <Footer />
    <script>
        // Mobile navigation toggle
        document.addEventListener('DOMContentLoaded', function() {
            const hamburger = document.querySelector('.hamburger');
            const navMenu = document.querySelector('.nav-menu');

            if (hamburger && navMenu) {
                hamburger.addEventListener('click', function() {
                    hamburger.classList.toggle('active');
                    navMenu.classList.toggle('active');
                });

                // Close mobile menu when clicking on a link
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.addEventListener('click', () => {
                        hamburger.classList.remove('active');
                        navMenu.classList.remove('active');
                    });
                });
            }

            // Form submission handling
            const contactForm = document.querySelector('.contact-form');
            if (contactForm) {
                contactForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    // Get form data
                    const formData = new FormData(this);
                    const data = Object.fromEntries(formData);
                    
                    // Simple validation
                    if (!data.name || !data.email || !data.message) {
                        alert('Please fill in all required fields.');
                        return;
                    }

                    // Here you would typically send the data to your server
                    // For now, we'll just show a success message
                    alert('Thank you for your message! We will get back to you soon.');
                    this.reset();
                });
            }

            // Smooth scrolling for anchor links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        const offsetTop = target.offsetTop - 80; // Account for fixed navbar
                        window.scrollTo({
                            top: offsetTop,
                            behavior: 'smooth'
                        });
                    }
                });
            });

            // Add scroll effect to navbar
            window.addEventListener('scroll', function() {
                const navbar = document.querySelector('.navbar');
                if (window.scrollY > 100) {
                    navbar.style.background = 'rgba(26, 26, 26, 0.95)';
                    navbar.style.backdropFilter = 'blur(10px)';
                } else {
                    navbar.style.background = '#1a1a1a';
                    navbar.style.backdropFilter = 'none';
                }
            });

            // Intersection Observer for animations
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver(function(entries) {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, observerOptions);

            // Observe all cards and sections
            document.querySelectorAll('.service-card, .pc-card, .contact-card, .hours-card').forEach(el => {
                el.style.opacity = '0';
                el.style.transform = 'translateY(30px)';
                el.style.transition = 'opacity 0.6s ease-out, transform 0.6s ease-out';
                observer.observe(el);
            });
        });
    </script>
</Layout>